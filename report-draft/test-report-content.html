<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hello Bulma!</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">
  <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="utils.js"></script>

  <link rel="stylesheet" href="style.css">
</head>

<body>
  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="dashboard.html">
        Simple test report
      </a>

      <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
        data-target="navbarBasicExample">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="navbarBasicExample" class="navbar-menu">
      <div class="navbar-start">

        <a class="navbar-item" href="dashboard.html">
          <i class="fas fa-bug"></i>
          Overview
        </a>

        <a class="navbar-item" href="test-report-content.html">
          <i class="far fa-calendar-check"></i>
          smoke_test </a>

        <a class="navbar-item">
          <i class="far fa-calendar-check"></i>
          unit_test
        </a>
        <a class="navbar-item">
          <i class="far fa-calendar-check"></i>
          integration_test
        </a>
        <a class="navbar-item">
          <i class="far fa-calendar-check"></i>
          acceptance_test
        </a>
        <a class="navbar-item">
          <i class="far fa-calendar-check"></i>
          interface_test
        </a>
        <a class="navbar-item">
          <i class="far fa-calendar-check"></i>
          regression_test
        </a>
        <a class="navbar-item">
          <i class="far fa-calendar-check"></i>
          sanity_test
        </a>

        <a class="navbar-item"> Documentation </a>


        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">
            More
          </a>

          <div class="navbar-dropdown">
            <a class="navbar-item" href="about.html">
              About
            </a>
          </div>
        </div>

        <div class="navbar-item">
          <div class="select">
            <select>
              <option>Select version</option>
              <option>options version 1</option>
              <option>options version 2</option>
              <option>options version 3</option>
              <option>options version 4</option>
              <option>options version 5</option>
              <option>options version 6</option>
              <option>options version 7</option>
              <option>options version 8</option>
            </select>
          </div>
        </div>

      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <div class="buttons">
            <a class="button is-white" href="https://www.github.com/louiscklaw" target="_blank">
              <i class="fab fa-github-square fa-2x"></i>
              <p style="margin: 0 0.3rem">Github source</p>
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- section -->
  <section class="section" style="padding-top: 1rem; padding-bottom: 1rem;">
    <div class="container">
      <p class="title is-5"> Unit test overview </p>
      <p class=""> unit test description</p>
    </div>
  </section>
  <!-- section -->

  <!-- section  -->
  <section class="section" style="padding-top: 0.5rem">
    <div class="container">

      <!-- columns -->
      <div class="columns is-desktop">

        <!-- column -->
        <div class="column">

          <!-- card -->
          <div class="card">
            <div class="card-image">
              <figure class="is-4by3" style="text-align:center;">
                <div style="width: 100%">
                  <canvas id="canvas-test-suite-1"></canvas>
                </div>
              </figure>
            </div>
            <div class="card-content">
              <div class="media">
                <div class="media-content">
                  <p class="title is-4">Test suite1</p>
                </div>
              </div>

              <div class="content">
                <p>
                  UNIT TESTING is a level of software testing where individual units/ components of a software are
                  tested.
                </p>
                <table>
                  <thead>
                    <tr>
                      <td>Passed</td>
                      <td>Failed</td>
                      <td>In progress</td>
                      <td>Error</td>
                    </tr>
                    <tr>
                      <td>10</td>
                      <td>2</td>
                      <td>13</td>
                      <td>1</td>
                    </tr>
                  </thead>
                </table>
              </div>
            </div>
          </div>
          <!-- card -->

        </div>
        <!-- column -->

        <!-- column -->
        <div class="column">

          <!-- card -->
          <div class="card">
            <div class="card-image">
              <figure class="is-4by3" style="text-align:center;">
                <div style="width: 100%">
                  <canvas id="canvas-test-suite-2"></canvas>
                </div>
              </figure>
            </div>
            <div class="card-content">
              <div class="media">
                <div class="media-content">
                  <p class="title is-4">Test suite2</p>
                </div>
              </div>

              <div class="content">
                <p>
                  UNIT TESTING is a level of software testing where individual units/ components of a software are
                  tested.
                </p>
                <table>
                  <thead>
                    <tr>
                      <td>Passed</td>
                      <td>Failed</td>
                      <td>In progress</td>
                      <td>Error</td>
                    </tr>
                    <tr>
                      <td>10</td>
                      <td>2</td>
                      <td>13</td>
                      <td>1</td>
                    </tr>
                  </thead>
                </table>
              </div>
            </div>
          </div>
          <!-- card -->
        </div>
        <!-- column -->

        <!-- column -->
        <div class="column">

          <!-- card -->
          <div class="card">
            <div class="card-image">
              <figure class="is-4by3" style="text-align:center;">
                <div style="width: 100%">
                  <canvas id="canvas-test-suite-3"></canvas>
                </div>
              </figure>
            </div>
            <div class="card-content">
              <div class="media">
                <div class="media-content">
                  <p class="title is-4">Test suite3</p>
                </div>
              </div>

              <div class="content">
                <p>
                  UNIT TESTING is a level of software testing where individual units/ components of a software are
                  tested.
                </p>
                <table>
                  <thead>
                    <tr>
                      <td>Passed</td>
                      <td>Failed</td>
                      <td>In progress</td>
                      <td>Error</td>
                    </tr>
                    <tr>
                      <td>10</td>
                      <td>2</td>
                      <td>13</td>
                      <td>1</td>
                    </tr>
                  </thead>
                </table>
              </div>
            </div>
          </div>
          <!-- card -->

        </div>
        <!-- column -->

        <!-- column -->
        <div class="column">

          <!-- card -->
          <div class="card">
            <div class="card-image">
              <figure class="is-4by3" style="text-align:center;">
                <div style="width: 100%">
                  <canvas id="canvas-test-suite-4"></canvas>
                </div>
              </figure>
            </div>
            <div class="card-content">
              <div class="media">
                <div class="media-content">
                  <p class="title is-4">Test suite4</p>
                </div>
              </div>

              <div class="content">
                <p>
                  UNIT TESTING is a level of software testing where individual units/ components of a software are
                  tested.
                </p>
                <table>
                  <thead>
                    <tr>
                      <td>Passed</td>
                      <td>Failed</td>
                      <td>In progress</td>
                      <td>Error</td>
                    </tr>
                    <tr>
                      <td>10</td>
                      <td>2</td>
                      <td>13</td>
                      <td>1</td>
                    </tr>
                  </thead>
                </table>
              </div>
            </div>
          </div>
          <!-- card -->

        </div>
        <!-- column -->



      </div>
      <!-- columns -->

      <!-- columns -->
      <div class="columns">

        <!-- column -->
        <div class="column">

          <!-- card -->
          <div class="card">
            <div class="card-image">
              <figure class="is-4by3" style="text-align:center;">
                <div id="canvas-holder" style="width: 90%; margin: auto;">
                  <canvas id="chart-area-time_spent"></canvas>
                </div>
              </figure>
            </div>
            <div class="card-content">
              <div class="media">
                <div class="media-content">
                  <p class="title is-4">total time spent analysis</p>
                </div>
              </div>

              <div class="content">
                <p> illustrate the total time spent
                </p>
                <table>
                  <thead>
                    <tr>
                      <td>test name</td>
                      <td>time used (min)</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>test_suite_1</td>
                      <td>2 (+2)</td>
                    </tr>
                    <tr>
                      <td>test_suite_2</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>test_suite_3</td>
                      <td>2(+5)</td>
                    </tr>
                    <tr>
                      <td>test_suite_4</td>
                      <td>2</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <!-- card -->

        </div>
        <!-- column -->



        <!-- column -->
        <div class="column">

          <!-- card -->
          <div class="card">
            <div class="card-image">
              <figure class="is-4by3" style="text-align:center;">
                <div id="canvas-holder" style="width: 90%; margin: auto;">
                  <canvas id="chart-0"></canvas>
                </div>
              </figure>
            </div>
            <div class="card-content">
              <div class="media">
                <div class="media-content">
                  <p class="title is-4">test case growth history</p>
                </div>
              </div>

              <div class="content">
                <p> illustrate the total time spent
                </p>
                <table>
                  <thead>
                    <tr>
                      <td>test name</td>
                      <td>time used (min)</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>unit_test</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>integration_test</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>acceptance_test</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>interface_test</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>regression_test</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>sanity_test</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>smoke_test</td>
                      <td>2</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <!-- card -->

        </div>
        <!-- column -->



        <div class="column"></div>
        <div class="column"></div>

      </div>
      <!-- columns -->

    </div>
  </section>
  <!-- section  -->

  <script>
    const test_name = 'unit_test'
    Promise.all( [
        fetch( 'test_result.json' ),
        fetch( 'past_test_result.json' )
      ] )
      .then( values => {
        Promise.all( [
            values[ 0 ].json(),
            values[ 1 ].json()
          ] )
          .then( values => {
            const test_result_json = values[ 0 ]
            const past_test_result_json = values[ 1 ]
            const canvas_id_list = [
              'canvas-test-suite-1',
              'canvas-test-suite-2',
              'canvas-test-suite-3',
              'canvas-test-suite-4',
            ]


            canvas_id_list.map( canvas_id => {
              const idx = canvas_id_list.indexOf( canvas_id )

              const test_results = test_result_json[ test_name ][ idx ].results

              const past_test_results = past_test_result_json[ test_name ][ idx ].results

              var barChartData = {
                labels: [ 'past version', 'This version' ],
                datasets: [ {
                  label: 'Passed',
                  backgroundColor: window.chartColors.green,
                  data: [
                    past_test_results[ 'passed' ],
                    test_results[ 'passed' ]
                  ]
                }, {
                  label: 'Failed',
                  backgroundColor: window.chartColors.red,
                  data: [
                    past_test_results[ 'failed' ],
                    test_results[ 'failed' ],
                  ]
                }, {
                  label: 'Error',
                  backgroundColor: window.chartColors.yellow,
                  data: [
                    past_test_results[ 'error' ],
                    test_results[ 'error' ],
                  ]
                }, {
                  label: 'In progress',
                  backgroundColor: window.chartColors.grey,
                  data: [
                    past_test_results[ 'in_progress' ],
                    test_results[ 'in_progress' ],
                  ]
                } ]
              };

              var ctx = document.querySelector( '#' + canvas_id ).getContext( '2d' );
              window.myBar = new Chart( ctx, {
                type: 'bar',
                data: barChartData,
                options: {
                  aspectRatio: 1,
                  title: {
                    display: true,
                    text: 'test results'
                  },
                  tooltips: {
                    mode: 'index',
                    intersect: false
                  },
                  responsive: true,
                  scales: {
                    xAxes: [ {
                      stacked: true,
                    } ],
                    yAxes: [ {
                      stacked: true
                    } ]
                  }
                }
              } );

            } )







            var color = Chart.helpers.color;
            var horizontalBarChartData = {
              labels: [
                'this_version',
                'past_version'
              ],
              datasets: [ {
                label: 'test suite 1',
                backgroundColor: color( window.chartColors.red ).alpha( 0.5 ).rgbString(),
                borderColor: window.chartColors.red,
                borderWidth: 1,
                data: [
                  4,
                  3
                ]
              }, {
                label: 'test suite 2',
                backgroundColor: color( window.chartColors.orange ).alpha( 0.5 ).rgbString(),
                borderColor: window.chartColors.orange,
                data: [
                  3,
                  2
                ]
              }, {
                label: 'test suite 3',
                backgroundColor: color( window.chartColors.yellow ).alpha( 0.5 ).rgbString(),
                borderColor: window.chartColors.yellow,
                data: [
                  2,
                  1
                ]
              }, {
                label: 'test suite 4',
                backgroundColor: color( window.chartColors.green ).alpha( 0.5 ).rgbString(),
                borderColor: window.chartColors.green,
                data: [
                  1,
                  0
                ]
              } ]

            };



            var ctx = document.getElementById( 'chart-area-time_spent' ).getContext( '2d' );
            window.myHorizontalBar = new Chart( ctx, {
              type: 'horizontalBar',
              data: horizontalBarChartData,
              options: {
                // Elements options apply to all of the options unless overridden in a dataset
                // In this case, we are setting the border of each horizontal bar to be 2px wide
                aspectRatio: 1,
                scales: {
                  xAxes: [ {
                    stacked: true
                  } ],
                  yAxes: [ {
                    stacked: true
                  } ]
                },
                elements: {
                  rectangle: {
                    borderWidth: 2,
                  }
                },
                responsive: true,
                legend: {
                  position: 'bottom',
                },
                title: {
                  display: true,
                  text: 'Chart.js Horizontal Bar Chart'
                }
              }
            } );











          } )
      } )





  </script>

  <!-- footer -->
  <footer class="footer">
    <div class="content has-text-centered">
      <div class="container">

        <p> Simple test report for xxxxx </p>

        <a class="button is-small is-white" href="//www.github.com/louiscklaw" target="_blank">
          <i class="fab fa-github-square fa-2x"></i>
          <span style="padding-left: 0.5rem;">www.github.com/louiscklaw</span>
        </a>


        <a class="button is-small is-white" href="//www.facebook.com/louiscklaw" target="_blank">
          <i class="fab fa-facebook-square fa-2x"></i>
          <span style="padding-left: 0.5rem;">www.facebook.com/louiscklaw</span>
        </a>


        <a class="button is-small is-white" href="//www.linkedin.com/in/louiscklaw" target="_blank">
          <i class="fab fa-linkedin fa-2x"></i>
          <span style="padding-left: 0.5rem;">www.linkedin.com/in/louiscklaw</span>
        </a>

      </div>
    </div>
  </footer>
  <!-- footer -->


</body>

</html>
